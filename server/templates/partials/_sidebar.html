<!-- /root/EMS/server/templates/partials/_sidebar.html -->
<div class="position-sticky pt-5"> <!-- Adjust pt (padding-top) to match navbar height -->
    <ul class="nav flex-column">
        <li class="nav-item">
            <a class="nav-link {% if active_page == 'dashboard' %}active{% endif %}" aria-current="page" href="{{ url_for('dashboard.view_dashboard') }}">
                <i class="bi bi-speedometer2 me-2"></i> Dashboard
                {% if pending_rename_count and pending_rename_count > 0 %}
                 <span class="badge bg-warning text-dark ms-1 float-end">{{ pending_rename_count }} !</span> <!-- Notification -->
                {% endif %}
            </a>
        </li>
        <li class="nav-item">
             <!-- *** UPDATE LINK HERE *** -->
            <a class="nav-link {% if active_page == 'users' %}active{% endif %}" href="{{ url_for('users.list_users') }}">
                <i class="bi bi-people me-2"></i> Users & Teams
                 {% if pending_rename_count and pending_rename_count > 0 and active_page != 'dashboard' %}
                 <span class="badge bg-warning text-dark ms-1 float-end">{{ pending_rename_count }} !</span> <!-- Show notification here too if not on dashboard -->
                {% endif %}
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link {% if active_page == 'reports' %}active{% endif %}" href="#"> <!-- Placeholder -->
                <i class="bi bi-file-earmark-bar-graph me-2"></i> Reports
            </a>
        </li>
         <li class="nav-item">
            <a class="nav-link {% if active_page == 'settings' %}active{% endif %}" href="#"> <!-- Placeholder -->
                <i class="bi bi-gear me-2"></i> Settings
            </a>
        </li>
         <!-- Add more links as needed -->
    </ul>

    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted text-uppercase">
        <span>Employees Online</span>
        <!-- Optional: Add button? -->
    </h6>
    <ul class="nav flex-column mb-2">
         {% if employees %} {# Assumes 'employees' is passed to layout context, might need adjustment #}
             {% for emp in employees %} {# Limit this list or make it dynamic #}
                 {% if emp.status != 'inactive' %} {# Example: Only show active/pending #}
                 <li class="nav-item">
                     <a class="nav-link text-secondary ps-4" href="{{ url_for('users.edit_user', employee_doc_id=emp._id) }}"> <!-- Link to individual employee details -->
                         {{ emp.display_name | truncate(20) }} {# Truncate long names #}
                         {% if emp.status == 'pending_rename' %}
                            <i class="bi bi-exclamation-triangle-fill text-warning" title="Needs Renaming"></i>
                         {% endif %}
                         {# Add status indicator based on last_seen maybe #}
                     </a>
                 </li>
                 {% endif %}
             {% endfor %}
         {% else %}
             <li class="nav-item ps-4 text-muted">No employees found.</li>
         {% endif %}
     </ul>
</div>